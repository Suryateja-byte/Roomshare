# ===========================================
# DATABASE
# ===========================================
DATABASE_URL=postgresql://postgres:password@localhost:5433/roomshare?schema=public

# ===========================================
# AUTHENTICATION (NextAuth v5)
# ===========================================
# Generate with: openssl rand -base64 32 (must be at least 32 characters)
NEXTAUTH_SECRET=your-nextauth-secret-at-least-32-characters-long
NEXTAUTH_URL=http://localhost:3000
AUTH_TRUST_HOST=true

# Google OAuth (https://console.cloud.google.com/apis/credentials)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# ===========================================
# SECURITY SECRETS
# ===========================================
# Cron Job Authentication - REQUIRED in production
# Generate with: openssl rand -base64 32 (must be at least 32 characters)
CRON_SECRET=generate-secure-secret-at-least-32-chars

# Metrics HMAC Secret (privacy-safe logging)
# Generate with: openssl rand -hex 32
LOG_HMAC_SECRET=generate-with-openssl-rand-hex-32-chars

# Metrics Ops Endpoint Authentication (optional)
# When set, GET /api/metrics/ops requires Bearer token matching this value
# Generate with: openssl rand -base64 32
# METRICS_SECRET=your-metrics-secret

# ===========================================
# ORIGIN/HOST SECURITY (Production)
# ===========================================
# Comma-separated, no trailing slashes
# Used by /api/chat and /api/metrics for request validation
ALLOWED_ORIGINS=https://roomshare.com,https://www.roomshare.com
ALLOWED_HOSTS=roomshare.com,www.roomshare.com

# ===========================================
# ERROR TRACKING (Sentry)
# ===========================================
SENTRY_DSN=https://your-sentry-dsn
# IMPORTANT: NEXT_PUBLIC_SENTRY_DSN must be set separately for client-side error tracking
# It is NOT auto-mapped from SENTRY_DSN
NEXT_PUBLIC_SENTRY_DSN=https://your-sentry-dsn
SENTRY_AUTH_TOKEN=your-sentry-auth-token

# ===========================================
# EXTERNAL SERVICES
# ===========================================

# Geocoding uses Photon + Nominatim (free, no API key needed)
# Map rendering uses OpenFreeMap (free, no API key needed)

# HERE Maps (optional - for geocoding accuracy comparison)
# Get a free API key from: https://developer.here.com/
HERE_API_KEY=your-here-api-key

# Supabase (storage and realtime)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# Email (Resend)
RESEND_API_KEY=your-resend-api-key
FROM_EMAIL=RoomShare <onboarding@resend.dev>

# AI Chat (Groq)
GROQ_API_KEY=your-groq-api-key

# ===========================================
# RATE LIMITING (Upstash Redis)
# ===========================================
# Get from https://console.upstash.com/
# Falls back to database rate limiting if not configured
UPSTASH_REDIS_REST_URL=https://your-instance.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-upstash-token

# ===========================================
# GOOGLE MAPS / PLACES
# ===========================================
# Browser key for Maps (HTTP referrer restricted)
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=your-google-maps-browser-key

# Browser key for Places UI Kit (HTTP referrer restricted)
NEXT_PUBLIC_GOOGLE_MAPS_UIKIT_KEY=your-google-maps-uikit-browser-key

# Server key for backend geocoding (IP restricted) - optional
GOOGLE_PLACES_API_KEY=your-google-places-server-key

# ===========================================
# RADAR (Nearby Places Search)
# ===========================================
# Get API keys from https://radar.com/dashboard
# Secret key (server-side only, IP restricted) - NEVER expose to client
RADAR_SECRET_KEY=prj_live_sk_...

# Publishable key (for map style URL, browser-safe)
NEXT_PUBLIC_RADAR_PUBLISHABLE_KEY=prj_live_pk_...

# Feature flag to enable/disable Nearby Places section
NEXT_PUBLIC_NEARBY_ENABLED=true

# ===========================================
# STADIA MAPS (Basemap Tiles)
# ===========================================
# Get API key from https://client.stadiamaps.com/
# Uses Alidade Smooth style with dark mode support.
#
# AUTHENTICATION OPTIONS:
# 1. Domain auth (RECOMMENDED for production):
#    - Add your domain at client.stadiamaps.com
#    - No API key needed in code
# 2. API key (fallback):
#    - Use query string ?api_key=YOUR_KEY
#    - Set the variable below
#
# DEVELOPMENT:
# localhost/127.0.0.1 works without API key
#
# COMMERCIAL USE:
# Free tier: 200,000 credits/month - non-commercial/evaluation only
# Production: Requires paid subscription (Starter, Standard, Professional)
#
NEXT_PUBLIC_STADIA_API_KEY=your-stadia-api-key

# ===========================================
# CLOUDFLARE TURNSTILE (Bot Protection)
# ===========================================
# Free bot protection for auth forms. Get keys from https://dash.cloudflare.com/turnstile
# Set TURNSTILE_ENABLED=true + provide both keys to activate.
# Test keys below auto-pass without user interaction (for dev/E2E).
TURNSTILE_ENABLED=true
TURNSTILE_SECRET_KEY=1x0000000000000000000000000000000AA
NEXT_PUBLIC_TURNSTILE_SITE_KEY=1x00000000000000000000AA

# ===========================================
# APPLICATION
# ===========================================
# Base URL for the application (used in emails, sitemap, SEO)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Trust proxy headers (x-forwarded-for) for rate limiting
# Set to "true" behind a reverse proxy in production
# TRUST_PROXY=true

# ===========================================
# NODE ENVIRONMENT
# ===========================================
NODE_ENV=development

# ===========================================
# E2E TESTING (Playwright)
# ===========================================
# Base URL for E2E tests (defaults to http://localhost:3000)
E2E_BASE_URL=http://localhost:3000

# Test user credentials (create a dedicated test user)
E2E_TEST_EMAIL=test@example.com
E2E_TEST_PASSWORD=TestPassword123!

# Admin test user credentials (for admin flow tests)
E2E_ADMIN_EMAIL=admin@example.com
E2E_ADMIN_PASSWORD=AdminPassword123!
